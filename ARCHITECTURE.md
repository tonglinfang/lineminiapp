# ç³»çµ±æ¶æ§‹æ–‡æª”

## ğŸ“ æ•´é«”æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       LINE Platform                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ LINE Login  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ LIFF SDK     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ OAuth 2.0
                               â”‚ User Profile
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend Application                      â”‚
â”‚                     (Vue 3 + Vite)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  UI Layer (Vant 4)                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚  Calendar  â”‚  â”‚  Schedule  â”‚  â”‚  Settings  â”‚     â”‚  â”‚
â”‚  â”‚  â”‚   Views    â”‚  â”‚   Editor   â”‚  â”‚   Page     â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              State Management (Pinia)                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚  â”‚   User   â”‚  â”‚ Schedule â”‚  â”‚ Calendar â”‚          â”‚  â”‚
â”‚  â”‚  â”‚  Store   â”‚  â”‚  Store   â”‚  â”‚  Store   â”‚          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚             â”‚              â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Business Logic Layer                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚ useLiff â”‚  â”‚useCalendarâ”‚  â”‚useNotificationâ”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Data Persistence Layer                   â”‚  â”‚
â”‚  â”‚                   (LocalStorage)                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  User Data (Isolated by LINE User ID)        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Schedules                                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Categories                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Preferences                                â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ Notifications
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Browser Notification API                        â”‚
â”‚  (Local notifications triggered by setTimeout)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ•¸æ“šæµç¨‹

### 1. ç”¨æˆ¶èªè­‰æµç¨‹

```
ç”¨æˆ¶æ‰“é–‹ LIFF URL
       â”‚
       â–¼
LIFF SDK åˆå§‹åŒ– (liff.init)
       â”‚
       â”œâ”€â”€â”€â”€â”€â–º å·²ç™»éŒ„ï¼Ÿ
       â”‚         â”‚
       â”‚         â”œâ”€ YES â”€â”€â–º ç²å–ç”¨æˆ¶è³‡æ–™ (liff.getProfile)
       â”‚         â”‚                â”‚
       â”‚         â”‚                â–¼
       â”‚         â”‚         å­˜å„²åˆ° User Store
       â”‚         â”‚                â”‚
       â”‚         â”‚                â–¼
       â”‚         â”‚         åŠ è¼‰ç”¨æˆ¶æ•¸æ“š (LocalStorage)
       â”‚         â”‚                â”‚
       â”‚         â”‚                â–¼
       â”‚         â”‚         æ¸²æŸ“æ‡‰ç”¨ç•Œé¢
       â”‚         â”‚
       â”‚         â””â”€ NO â”€â”€â–º è·³è½‰ LINE ç™»éŒ„é é¢
       â”‚                         â”‚
       â”‚                         â–¼
       â”‚                   ç”¨æˆ¶æˆæ¬Š
       â”‚                         â”‚
       â”‚                         â–¼
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º è¿”å›æ‡‰ç”¨ï¼ˆå·²ç™»éŒ„ï¼‰
```

### 2. æ—¥ç¨‹å‰µå»ºæµç¨‹

```
ç”¨æˆ¶é»æ“Šã€Œ+ã€æŒ‰éˆ•
       â”‚
       â–¼
æ‰“é–‹ ScheduleEditor çµ„ä»¶
       â”‚
       â–¼
ç”¨æˆ¶å¡«å¯«è¡¨å–®
 â€¢ æ¨™é¡Œ
 â€¢ æ™‚é–“
 â€¢ é¡åˆ¥
 â€¢ æé†’è¨­ç½®
       â”‚
       â–¼
é»æ“Šã€Œä¿å­˜ã€
       â”‚
       â–¼
è¡¨å–®é©—è­‰
       â”‚
       â”œâ”€ å¤±æ•— â”€â”€â–º é¡¯ç¤ºéŒ¯èª¤æç¤º
       â”‚
       â””â”€ æˆåŠŸ â”€â”€â–º scheduleStore.createSchedule()
                           â”‚
                           â–¼
                   ç”Ÿæˆå”¯ä¸€ ID (UUID)
                           â”‚
                           â–¼
                   æ·»åŠ åˆ° schedules æ•¸çµ„
                           â”‚
                           â–¼
                   ä¿å­˜åˆ° LocalStorage
                           â”‚
                           â–¼
                   å•Ÿç”¨æé†’ï¼Ÿ
                      â”‚
                      â”œâ”€ YES â”€â”€â–º scheduleNotification()
                      â”‚                â”‚
                      â”‚                â–¼
                      â”‚          è¨ˆç®—æé†’æ™‚é–“
                      â”‚                â”‚
                      â”‚                â–¼
                      â”‚          setTimeout èª¿åº¦
                      â”‚                â”‚
                      â”‚                â–¼
                      â”‚          å­˜å„² timeoutId
                      â”‚
                      â””â”€ NO â”€â”€â–º å®Œæˆ
                           â”‚
                           â–¼
                   æ›´æ–° UI é¡¯ç¤º
                           â”‚
                           â–¼
                   è¿”å›æ—¥æ›†é é¢
```

### 3. é€šçŸ¥æé†’æµç¨‹

```
æ‡‰ç”¨å•Ÿå‹•
       â”‚
       â–¼
åŠ è¼‰æ‰€æœ‰æ—¥ç¨‹
       â”‚
       â–¼
rescheduleAll() - é‡æ–°èª¿åº¦æ‰€æœ‰é€šçŸ¥
       â”‚
       â–¼
éæ­·æ¯å€‹æ—¥ç¨‹
       â”‚
       â”œâ”€â”€â”€â”€â”€â–º æé†’å·²å•Ÿç”¨ï¼Ÿ
       â”‚           â”‚
       â”‚           â”œâ”€ NO â”€â”€â–º è·³é
       â”‚           â”‚
       â”‚           â””â”€ YES â”€â”€â–º è¨ˆç®—æé†’æ™‚é–“
       â”‚                           â”‚
       â”‚                           â–¼
       â”‚                     æ™‚é–“åœ¨æœªä¾† 24 å°æ™‚å…§ï¼Ÿ
       â”‚                           â”‚
       â”‚                           â”œâ”€ NO â”€â”€â–º è·³é
       â”‚                           â”‚
       â”‚                           â””â”€ YES â”€â”€â–º èª¿åº¦é€šçŸ¥
       â”‚                                           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              åˆ°é”æé†’æ™‚é–“ï¼ˆsetTimeout è§¸ç™¼ï¼‰
                           â”‚
                           â–¼
              å‰µå»ºç€è¦½å™¨é€šçŸ¥ (new Notification)
                           â”‚
                           â–¼
              é¡¯ç¤ºé€šçŸ¥å…§å®¹ï¼š
               â€¢ æ¨™é¡Œ
               â€¢ æè¿°
               â€¢ æ™‚é–“
                           â”‚
                           â–¼
              ç”¨æˆ¶é»æ“Šé€šçŸ¥ï¼Ÿ
                      â”‚
                      â”œâ”€ YES â”€â”€â–º æ‰“é–‹æ‡‰ç”¨ä¸¦è·³è½‰åˆ°è©²æ—¥ç¨‹
                      â”‚
                      â””â”€ NO â”€â”€â–º é€šçŸ¥è‡ªå‹•é—œé–‰
```

## ğŸ“¦ æ¨¡å¡Šçµæ§‹

### æ ¸å¿ƒæ¨¡å¡Š

#### 1. LIFF Integration (`src/composables/useLiff.js`)

**è·è²¬**ï¼š
- åˆå§‹åŒ– LIFF SDK
- è™•ç†ç”¨æˆ¶èªè­‰
- ç²å–ç”¨æˆ¶è³‡æ–™
- æä¾› Mock æ¨¡å¼æ”¯æŒ

**é—œéµ API**ï¼š
```javascript
{
  initLiff()      // åˆå§‹åŒ– LIFF
  login()         // åŸ·è¡Œç™»éŒ„
  logout()        // ç™»å‡º
  getUserProfile()// ç²å–ç”¨æˆ¶è³‡æ–™
  isInClient()    // æª¢æŸ¥æ˜¯å¦åœ¨ LINE å®¢æˆ¶ç«¯
  closeWindow()   // é—œé–‰ LIFF è¦–çª—
}
```

#### 2. State Management

**User Store** (`src/stores/user.js`)
```javascript
{
  state: {
    profile,        // LINE ç”¨æˆ¶è³‡æ–™
    preferences,    // ç”¨æˆ¶åå¥½è¨­ç½®
    isAuthenticated // èªè­‰ç‹€æ…‹
  },
  actions: {
    setProfile(),
    updatePreferences(),
    logout()
  }
}
```

**Schedule Store** (`src/stores/schedule.js`)
```javascript
{
  state: {
    schedules,      // æ‰€æœ‰æ—¥ç¨‹
    loading,        // åŠ è¼‰ç‹€æ…‹
    error          // éŒ¯èª¤ä¿¡æ¯
  },
  getters: {
    getSchedulesByDate(),    // æŒ‰æ—¥æœŸæŸ¥è©¢
    getSchedulesByRange(),   // æŒ‰ç¯„åœæŸ¥è©¢
    upcomingSchedules(),     // å³å°‡åˆ°ä¾†çš„æ—¥ç¨‹
    todaySchedules()         // ä»Šæ—¥æ—¥ç¨‹
  },
  actions: {
    loadSchedules(),         // åŠ è¼‰æ•¸æ“š
    createSchedule(),        // å‰µå»º
    updateSchedule(),        // æ›´æ–°
    deleteSchedule(),        // åˆªé™¤
    toggleComplete()         // æ¨™è¨˜å®Œæˆ
  }
}
```

**Calendar Store** (`src/stores/calendar.js`)
```javascript
{
  state: {
    currentDate,    // ç•¶å‰é¡¯ç¤ºæ—¥æœŸ
    viewMode,       // è¦–åœ–æ¨¡å¼ï¼ˆæœˆ/é€±ï¼‰
    selectedDate    // é¸ä¸­çš„æ—¥æœŸ
  },
  actions: {
    setCurrentDate(),
    setViewMode(),
    goToToday(),
    goNext(),
    goPrev()
  }
}
```

#### 3. Business Logic

**Calendar Logic** (`src/composables/useCalendar.js`)
```javascript
{
  monthGrid,          // æœˆè¦–åœ–ç¶²æ ¼ï¼ˆ42 å¤©ï¼‰
  weekDays,           // ç•¶å‰é€±çš„æ—¥æœŸ
  goNext(),           // ä¸‹ä¸€å€‹æœˆ/é€±
  goPrev(),           // ä¸Šä¸€å€‹æœˆ/é€±
  goToToday(),        // è¿”å›ä»Šå¤©
  isToday(),          // åˆ¤æ–·æ˜¯å¦ä»Šå¤©
  getScheduleCount()  // ç²å–æ—¥ç¨‹æ•¸é‡
}
```

**Notification System** (`src/composables/useNotification.js`)
```javascript
{
  requestPermission(),      // è«‹æ±‚é€šçŸ¥æ¬Šé™
  scheduleNotification(),   // èª¿åº¦å–®å€‹é€šçŸ¥
  cancelNotification(),     // å–æ¶ˆé€šçŸ¥
  rescheduleAll(),          // é‡æ–°èª¿åº¦æ‰€æœ‰
  sendScheduleReminder(),   // ç™¼é€æé†’
  cleanupExpired()          // æ¸…ç†éæœŸé€šçŸ¥
}
```

#### 4. Data Persistence

**Storage Service** (`src/utils/storage.js`)
```javascript
class StorageService {
  // ç”¨æˆ¶æ•¸æ“šéš”é›¢
  getUserKey(key, userId)

  // CRUD æ“ä½œ
  getSchedules(userId)
  saveSchedules(schedules, userId)
  addSchedule(schedule, userId)
  updateSchedule(id, updates, userId)
  deleteSchedule(id, userId)

  // æ•¸æ“šç®¡ç†
  exportData(userId)
  importData(data, userId)
  clearUserData(userId)
}
```

**LocalStorage éµå€¼çµæ§‹**ï¼š
```
lineminiapp_user_U1234567890        â†’ ç”¨æˆ¶è³‡æ–™
lineminiapp_schedules_U1234567890   â†’ æ—¥ç¨‹æ•¸æ“š
lineminiapp_categories_U1234567890  â†’ è‡ªå®šç¾©é¡åˆ¥
lineminiapp_prefs_U1234567890       â†’ ç”¨æˆ¶åå¥½
lineminiapp_last_user               â†’ æœ€å¾Œç™»éŒ„ç”¨æˆ¶
lineminiapp_version                 â†’ æ•¸æ“šç‰ˆæœ¬
```

## ğŸ¨ UI çµ„ä»¶å±¤æ¬¡

```
App.vue
 â”‚
 â”œâ”€ AppHeader.vue (é é¢æ¨™é¡Œ)
 â”‚
 â”œâ”€ router-view (è·¯ç”±è¦–åœ–)
 â”‚   â”‚
 â”‚   â”œâ”€ Home.vue (é¦–é  - æ—¥æ›†)
 â”‚   â”‚   â”œâ”€ CalendarHeader.vue
 â”‚   â”‚   â”œâ”€ MonthView.vue
 â”‚   â”‚   â”‚   â””â”€ DateCell.vue (Ã—42)
 â”‚   â”‚   â””â”€ WeekView.vue
 â”‚   â”‚       â””â”€ ScheduleItem.vue (Ã—N)
 â”‚   â”‚
 â”‚   â”œâ”€ ScheduleList.vue (åˆ—è¡¨é )
 â”‚   â”‚   â”œâ”€ SearchBar.vue
 â”‚   â”‚   â”œâ”€ FilterBar.vue
 â”‚   â”‚   â””â”€ ScheduleItem.vue (Ã—N)
 â”‚   â”‚
 â”‚   â”œâ”€ ScheduleCreate.vue (å‰µå»ºé )
 â”‚   â”‚   â””â”€ ScheduleEditor.vue
 â”‚   â”‚       â”œâ”€ CategoryPicker.vue
 â”‚   â”‚       â”œâ”€ ColorPicker.vue
 â”‚   â”‚       â””â”€ ReminderPicker.vue
 â”‚   â”‚
 â”‚   â”œâ”€ ScheduleEdit.vue (ç·¨è¼¯é )
 â”‚   â”‚   â””â”€ ScheduleEditor.vue (å¾©ç”¨)
 â”‚   â”‚
 â”‚   â””â”€ Settings.vue (è¨­ç½®é )
 â”‚       â”œâ”€ NotificationSettings.vue
 â”‚       â”œâ”€ ViewSettings.vue
 â”‚       â””â”€ DataManagement.vue
 â”‚
 â””â”€ AppTabbar.vue (åº•éƒ¨å°èˆªæ¬„)
```

## ğŸ” æ•¸æ“šå®‰å…¨

### ç”¨æˆ¶æ•¸æ“šéš”é›¢

æ¯å€‹ LINE ç”¨æˆ¶çš„æ•¸æ“šå®Œå…¨éš”é›¢ï¼š

```javascript
// ç”¨æˆ¶ A (U111111111)
localStorage.getItem('lineminiapp_schedules_U111111111')
// â†’ åƒ…è¿”å›ç”¨æˆ¶ A çš„æ•¸æ“š

// ç”¨æˆ¶ B (U222222222)
localStorage.getItem('lineminiapp_schedules_U222222222')
// â†’ åƒ…è¿”å›ç”¨æˆ¶ B çš„æ•¸æ“š
```

### æ•¸æ“šé©—è­‰

æ‰€æœ‰ LocalStorage è®€å–éƒ½ç¶“éé©—è­‰ï¼š

```javascript
try {
  const data = JSON.parse(localStorage.getItem(key))

  // é©—è­‰æ•¸æ“šçµæ§‹
  if (!Array.isArray(data.schedules)) {
    throw new Error('Invalid data format')
  }

  // é©—è­‰æ¯å€‹æ—¥ç¨‹
  data.schedules = data.schedules.filter(schedule => {
    return schedule.id &&
           schedule.userId === currentUserId &&
           schedule.title
  })

  return data
} catch (error) {
  console.error('Data validation failed:', error)
  return { schedules: [] }
}
```

## âš¡ æ€§èƒ½å„ªåŒ–

### 1. ä»£ç¢¼åˆ†å‰²

```javascript
// è·¯ç”±æ‡¶åŠ è¼‰
const routes = [
  {
    path: '/',
    component: () => import('@/views/Home.vue')
  },
  {
    path: '/schedules',
    component: () => import('@/views/ScheduleList.vue')
  }
]
```

**æ§‹å»ºçµæœ**ï¼š
- ä¸»å…¥å£ï¼š~162 KB
- è·¯ç”±å¡Šï¼š1-10 KB each
- ç¸½ä¸‹è¼‰ï¼šæŒ‰éœ€åŠ è¼‰

### 2. çµ„ä»¶ç·©å­˜

```vue
<template>
  <router-view v-slot="{ Component }">
    <keep-alive :include="['Home', 'ScheduleList']">
      <component :is="Component" />
    </keep-alive>
  </router-view>
</template>
```

### 3. è¨ˆç®—å±¬æ€§ç·©å­˜

```javascript
// ä½¿ç”¨ computed ç·©å­˜è¨ˆç®—çµæœ
const monthGrid = computed(() => {
  return getMonthCalendarGrid(currentDate.value, weekStartsOn.value)
})

// åªåœ¨ currentDate æˆ– weekStartsOn è®ŠåŒ–æ™‚é‡æ–°è¨ˆç®—
```

### 4. LocalStorage æ‰¹é‡æ“ä½œ

```javascript
// é¿å…é »ç¹å¯«å…¥
let pendingWrites = []
let writeTimer = null

function scheduleWrite(data) {
  pendingWrites.push(data)

  clearTimeout(writeTimer)
  writeTimer = setTimeout(() => {
    // æ‰¹é‡å¯«å…¥
    const merged = mergePendingWrites(pendingWrites)
    localStorage.setItem(key, JSON.stringify(merged))
    pendingWrites = []
  }, 100)
}
```

## ğŸš€ éƒ¨ç½²æµç¨‹

### CI/CD æµç¨‹

```
é–‹ç™¼è€…æ¨é€ä»£ç¢¼
       â”‚
       â–¼
GitHub Actions è§¸ç™¼
       â”‚
       â–¼
å®‰è£ Node.js 18
       â”‚
       â–¼
npm ci (å®‰è£ä¾è³´)
       â”‚
       â–¼
npm run build (æ§‹å»º)
 â€¢ æ³¨å…¥ VITE_LIFF_ID
 â€¢ è¨­ç½® production ç’°å¢ƒ
 â€¢ ä»£ç¢¼å£“ç¸®å„ªåŒ–
       â”‚
       â–¼
ç”Ÿæˆ dist/ ç›®éŒ„
       â”‚
       â–¼
ä¸Šå‚³åˆ° GitHub Pages
       â”‚
       â–¼
éƒ¨ç½²å®Œæˆ
       â”‚
       â–¼
å¯è¨ªå•ï¼šhttps://username.github.io/lineminiapp/
```

### æ§‹å»ºç”¢ç‰©

```
dist/
â”œâ”€â”€ index.html                    # å…¥å£ HTML
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-[hash].js          # ä¸»æ‡‰ç”¨ï¼ˆ162 KBï¼‰
â”‚   â”œâ”€â”€ vendor-vue-[hash].js     # Vue æ ¸å¿ƒï¼ˆ103 KBï¼‰
â”‚   â”œâ”€â”€ vendor-ui-[hash].js      # Vant UIï¼ˆ72 KBï¼‰
â”‚   â”œâ”€â”€ Home-[hash].js           # é¦–é ï¼ˆ6.3 KBï¼‰
â”‚   â”œâ”€â”€ ScheduleList-[hash].js   # åˆ—è¡¨é ï¼ˆ3.2 KBï¼‰
â”‚   â””â”€â”€ ... (å…¶ä»–è·¯ç”±å¡Š)
â””â”€â”€ favicon.ico
```

## ğŸ“Š æ•¸æ“šæ¨¡å‹

### Schedule æ•¸æ“šçµæ§‹

```typescript
interface Schedule {
  id: string                    // UUID v4
  userId: string                // LINE User ID
  title: string                 // æ¨™é¡Œï¼ˆå¿…å¡«ï¼‰
  description?: string          // æè¿°ï¼ˆå¯é¸ï¼‰

  // æ™‚é–“
  startDate: string            // YYYY-MM-DD
  startTime: string            // HH:mm
  endDate: string              // YYYY-MM-DD
  endTime: string              // HH:mm
  isAllDay: boolean            // å…¨å¤©äº‹ä»¶

  // åˆ†é¡
  category: CategoryId         // é¡åˆ¥ ID
  tags: string[]               // æ¨™ç±¤æ•¸çµ„
  color: string                // é¡è‰²ï¼ˆHEXï¼‰

  // æé†’
  reminder: {
    enabled: boolean
    type: 'local' | 'line'
    time: number               // æ•¸å€¼
    unit: 'minutes' | 'hours' | 'days'
  }

  // å…ƒæ•¸æ“š
  createdAt: string            // ISO 8601
  updatedAt: string            // ISO 8601
  isCompleted: boolean         // å®Œæˆç‹€æ…‹
  isDeleted: boolean           // è»Ÿåˆªé™¤æ¨™è¨˜
}
```

### Category æ•¸æ“šçµæ§‹

```typescript
interface Category {
  id: string
  label: string
  color: string               // HEX é¡è‰²
  icon: string                // Emoji åœ–æ¨™
  isDefault: boolean          // é è¨­é¡åˆ¥
  userId?: string             // è‡ªå®šç¾©é¡åˆ¥çš„ç”¨æˆ¶ ID
}
```

## ğŸ”§ æ“´å±•æ€§

### æ·»åŠ æ–°åŠŸèƒ½

#### 1. æ·»åŠ æ–°çš„æ—¥ç¨‹å­—æ®µ

```javascript
// 1. æ›´æ–°æ•¸æ“šæ¨¡å‹
interface Schedule {
  // ... ç¾æœ‰æ¬„ä½
  location?: string          // æ–°å¢ï¼šåœ°é»
  attendees?: string[]       // æ–°å¢ï¼šåƒèˆ‡è€…
}

// 2. æ›´æ–° ScheduleEditor çµ„ä»¶
<van-field v-model="form.location" label="åœ°é»" />

// 3. æ›´æ–°å­˜å„²æœå‹™
// StorageService è‡ªå‹•æ”¯æŒæ–°æ¬„ä½
```

#### 2. æ•´åˆå¤–éƒ¨æœå‹™

```javascript
// æ•´åˆ Google Calendar
// src/services/googleCalendar.js

export async function syncToGoogle(schedule) {
  // OAuth èªè­‰
  const token = await getGoogleAuthToken()

  // è½‰æ›æ•¸æ“šæ ¼å¼
  const event = convertToGoogleFormat(schedule)

  // API èª¿ç”¨
  const response = await fetch('https://www.googleapis.com/calendar/v3/calendars/primary/events', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(event)
  })

  return response.json()
}
```

#### 3. æ·»åŠ æ–°è¦–åœ–æ¨¡å¼

```javascript
// 1. å®šç¾©æ–°è¦–åœ–
// src/utils/constants.js
export const VIEW_MODES = {
  MONTH: 'month',
  WEEK: 'week',
  DAY: 'day',        // ç¾æœ‰
  AGENDA: 'agenda'    // æ–°å¢ï¼šè­°ç¨‹è¦–åœ–
}

// 2. å‰µå»ºè¦–åœ–çµ„ä»¶
// src/components/calendar/AgendaView.vue

// 3. åœ¨è·¯ç”±ä¸­æ³¨å†Š
// src/router/index.js
```

## ğŸ“ˆ ç›£æ§èˆ‡åˆ†æ

### éŒ¯èª¤è¿½è¹¤

```javascript
// å…¨å±€éŒ¯èª¤è™•ç†
app.config.errorHandler = (err, instance, info) => {
  console.error('Global error:', err)
  console.error('Component:', instance)
  console.error('Info:', info)

  // å¯é¸ï¼šç™¼é€åˆ°éŒ¯èª¤è¿½è¹¤æœå‹™
  // sendToSentry(err, { instance, info })
}
```

### æ€§èƒ½ç›£æ§

```javascript
// é é¢åŠ è¼‰æ™‚é–“
window.addEventListener('load', () => {
  const perfData = performance.getEntriesByType('navigation')[0]
  console.log('Page load time:', perfData.loadEventEnd - perfData.fetchStart, 'ms')
})

// API éŸ¿æ‡‰æ™‚é–“
const startTime = performance.now()
await someAsyncOperation()
const endTime = performance.now()
console.log('Operation took:', endTime - startTime, 'ms')
```

---

**æ–‡æª”ç‰ˆæœ¬**ï¼š1.0
**æœ€å¾Œæ›´æ–°**ï¼š2024-02-10
